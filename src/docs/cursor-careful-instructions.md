# Google Maps + Mapbox Integration - Careful Implementation Guide

## Initial Steps for Cursor

```typescript
// Before making any changes:
// 1. Please show me the existing map-related files in the project
// 2. Show me the current routing implementation
// 3. Show me any existing styling files related to the map
// This will help ensure we preserve existing functionality
```

## Project Structure Preservation

```typescript
// Before proceeding, please confirm:
// 1. The location of existing map-related code
// 2. Current styling implementation
// 3. Existing route calculation logic
// We'll integrate new features while maintaining current functionality
```

## Step-by-Step Integration

### 1. Create Google Maps Service (New File)

```typescript
// Create new file: src/services/GoogleMapsManager.ts
// This should be a new addition, not a replacement
// Before implementing, show me any existing service files for reference
```

### 2. Extend Existing Map Layer

```typescript
// Before modifying any existing map code:
// 1. Show me the current map initialization
// 2. Show me existing map-related components
// We'll carefully integrate Google services while preserving current functionality
```

### 3. Safe Controller Integration

```typescript
// Before implementing the controller:
// 1. Show me existing controller files
// 2. Show me the current routing logic
// We'll create new methods while preserving existing ones
```

## Implementation Guidelines

### Preserving Existing Styles

```typescript
// Before adding any new styles:
// 1. Show me current style files
// 2. Show me existing map-related CSS
// We'll add new styles without affecting current ones
```

### Safe Feature Integration

1. **Location Services Integration**
```typescript
// Before implementing location services:
// 1. Show any existing location-related code
// 2. Show current geocoding implementation
// We'll enhance existing functionality, not replace it
```

2. **Route Enhancement**
```typescript
// Before modifying routing:
// 1. Show current route calculation code
// 2. Show existing route visualization
// We'll add Google's traffic data while preserving current logic
```

3. **POI Integration**
```typescript
// Before adding POI features:
// 1. Show existing POI implementation
// 2. Show current marker system
// We'll enhance with Google Places while keeping current functionality
```

## Safe Data Flow Integration

```typescript
// Review current data flow:
// 1. Show existing API calls
// 2. Show current state management
// We'll integrate Google services alongside existing systems
```

## Careful Type Integration

```typescript
// Before adding new types:
// 1. Show current type definitions
// 2. Show existing interfaces
// We'll extend current types without breaking existing ones
```

## Example Implementation Requests

1. **Safe Service Integration**
```typescript
// Please show me the current map service implementation
// Then, create a new GoogleMapsManager class that works alongside it:

class GoogleMapsManager {
  // Request to see existing service patterns before implementing
}
```

2. **Careful Route Enhancement**
```typescript
// Please show me the current routing implementation
// Then, enhance it with Google's traffic data:

async function enhanceRouteWithTraffic(existingRoute) {
  // Request to see current route structure before implementing
}
```

3. **Safe Style Integration**
```typescript
// Please show me current map styles
// Then, add new styles for Google elements:

const newStyles = {
  // Request to see existing style patterns before implementing
}
```

## Implementation Order (With Safety Checks)

1. **Initial Review**
```typescript
// Before starting:
// - Show all map-related files
// - Show current routing implementation
// - Show existing styles
```

2. **Service Addition**
```typescript
// Create new services alongside existing ones:
// - Show current services
// - Add Google services
// - Verify no conflicts
```

3. **Feature Enhancement**
```typescript
// Enhance existing features:
// - Show current feature implementation
// - Add Google capabilities
// - Verify existing functionality
```

4. **Testing Integration**
```typescript
// Before adding tests:
// - Show existing test files
// - Show current test patterns
// - Add new tests preserving current ones
```

## Usage Example with Safety Checks

```typescript
// Before implementing:
// 1. Show current initialization pattern
// 2. Show existing usage examples
// Then we'll implement:

class SafeMapController {
  constructor() {
    // Request to see current constructor pattern
  }

  async enhanceWithGoogleServices() {
    // Request to see current service pattern
  }
}
```

## Important Safety Reminders

1. **Before Each Change**:
   - Request to see related existing files
   - Verify current implementation
   - Check for dependencies

2. **During Implementation**:
   - Add functionality alongside existing code
   - Preserve current method signatures
   - Maintain existing style patterns

3. **After Changes**:
   - Verify existing functionality
   - Check style preservation
   - Validate current features still work
